<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Math Quiz – no build</title>
  <!-- Tailwind via CDN (no install) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>
</head>
<body class="min-h-screen bg-gray-50 text-gray-900 dark:bg-gray-950 dark:text-gray-100">
  <!-- Header -->
  <header class="border-b border-gray-200/70 bg-white/70 backdrop-blur dark:border-gray-800 dark:bg-gray-900/60">
    <div class="mx-auto max-w-3xl px-4 py-3 flex items-center gap-3">
      <div class="h-7 w-7 rounded-xl bg-gray-900 dark:bg-white"></div>
      <div class="font-semibold tracking-tight">Math Quiz</div>
      <button id="themeBtn"
        class="ml-auto text-xs rounded-lg border border-gray-300 px-2 py-1 transition hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800">
        Toggle theme
      </button>
    </div>
  </header>

  <!-- Main -->
  <main class="mx-auto max-w-3xl p-4 md:p-6 lg:p-8">
    <!-- Setup -->
    <section id="setup" class="space-y-6">
      <h1 class="text-xl font-semibold tracking-tight">Setup</h1>
      <div class="grid gap-4 md:grid-cols-3">
        <!-- Operation -->
        <div class="rounded-2xl border border-gray-200/80 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900">
          <label class="mb-1 block text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Operation</label>
          <select id="op"
            class="w-full rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm dark:border-gray-700 dark:bg-gray-950">
            <option value="addition">Addition (+)</option>
            <option value="subtraction">Subtraction (−)</option>
            <option value="multiplication">Multiplication (×)</option>
            <option value="division">Division (÷)</option>
          </select>
        </div>
        <!-- Digits -->
        <div class="rounded-2xl border border-gray-200/80 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900">
          <label class="mb-1 block text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Digits per number (1–9)</label>
          <input id="digits" type="number" min="1" max="9" value="2"
            class="w-full rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm dark:border-gray-700 dark:bg-gray-950" />
          <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">e.g., 2 → two-digit numbers like 22, 33, 14…</p>
        </div>
        <!-- Count -->
        <div class="rounded-2xl border border-gray-200/80 bg-white p-4 shadow-sm dark:border-gray-800 dark:bg-gray-900">
          <label class="mb-1 block text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">How many numbers (1–9)</label>
          <input id="count" type="number" min="1" max="9" value="4"
            class="w-full rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm dark:border-gray-700 dark:bg-gray-950" />
        </div>
      </div>

      <button id="startBtn"
        class="rounded-xl bg-gray-900 px-4 py-2 text-sm font-medium text-white transition hover:opacity-90 dark:bg-white dark:text-gray-900">
        Start Quiz
      </button>
    </section>

    <!-- Quiz -->
    <section id="quiz" class="space-y-6 hidden">
      <div class="flex items-center justify-between">
        <h1 class="text-xl font-semibold tracking-tight">Quiz</h1>
        <button id="backBtn"
          class="rounded-xl border border-gray-300 px-3 py-2 text-xs transition hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800">
          ← Back
        </button>
      </div>

      <div class="rounded-2xl border border-gray-200/80 bg-white p-6 text-center text-lg shadow-sm dark:border-gray-800 dark:bg-gray-900">
        <div id="expr" class="mb-4 font-mono text-2xl">_</div>
        <div class="mx-auto flex max-w-md items-center gap-2">
          <input id="answerInput" placeholder="Your answer" inputmode="decimal"
            class="flex-1 rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm outline-none dark:border-gray-700 dark:bg-gray-950" />
          <button id="checkBtn"
            class="rounded-xl bg-gray-900 px-4 py-2 text-sm font-medium text-white transition hover:opacity-90 dark:bg-white dark:text-gray-900">
            Check
          </button>
          <button id="showBtn"
            class="rounded-xl border border-gray-300 px-3 py-2 text-sm transition hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800">
            Show
          </button>
        </div>
        <div id="status" class="mt-3 text-sm"></div>
      </div>

      <div class="flex items-center justify-between text-sm text-gray-600 dark:text-gray-300">
        <div class="rounded-xl border border-dashed border-gray-300 p-3 dark:border-gray-800">
          <div>Operation: <b id="opLabel">+</b></div>
          <div>Digits per number: <b id="digitsLabel">2</b></div>
          <div>Count: <b id="countLabel">4</b></div>
        </div>
        <button id="regenBtn"
          class="rounded-xl border border-gray-300 px-3 py-2 transition hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800">
          Regenerate
        </button>
      </div>
    </section>
  </main>

  <footer class="border-t border-gray-200/70 p-4 text-center text-xs text-gray-500 dark:border-gray-800 dark:text-gray-400">
    Simple GitHub Pages app — no build needed
  </footer>

  <script>
  const $ = (id) => document.getElementById(id);

  const state = {
    op: 'addition',
    digits: 2,
    count: 4,
    nums: [],
    answer: 0,
  };

  const sym = {
    addition: '+',
    subtraction: '−',
    multiplication: '×',
    division: '÷',
  };

  function clamp(n, min, max) {
    n = Number(n);
    if (Number.isNaN(n)) return min;
    return Math.min(max, Math.max(min, n));
  }

  function randInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function makeOperand(digits) {
    if (digits <= 1) return randInt(1, 9);
    const min = Math.pow(10, digits - 1);
    const max = Math.pow(10, digits) - 1;
    return randInt(min, max);
  }

  function compute(op, nums) {
    if (!nums.length) return 0;
    switch (op) {
      case 'addition': return nums.reduce((a, b) => a + b, 0);
      case 'subtraction': return nums.slice(1).reduce((a, b) => a - b, nums[0]);
      case 'multiplication': return nums.reduce((a, b) => a * b, 1);
      case 'division': return nums.slice(1).reduce((a, b) => a / b, nums[0]);
    }
  }

  function makeExpr(op, nums) {
    return nums.join(` ${sym[op]} `) + ' = ?';
  }

  function generate() {
    const nums = Array.from({ length: state.count }, (_, i) => {
      const n = makeOperand(state.digits);
      return (state.op === 'division' && i > 0 && n === 0) ? 1 : n;
    });
    state.nums = nums;
    state.answer = compute(state.op, nums);
    $('expr').textContent = makeExpr(state.op, nums);
    $('status').textContent = '';
    $('status').className = 'mt-3 text-sm';
    $('answerInput').value = '';
  }

  function nextQuiz() {
    setTimeout(() => {
      generate();
    }, 800); // small delay to let the user see “Correct!” or “Shown.”
  }

  // UI bindings
  $('startBtn').onclick = () => {
    state.op = $('op').value;
    state.digits = clamp($('digits').value, 1, 9);
    state.count = clamp($('count').value, 1, 9);

    $('opLabel').textContent = sym[state.op];
    $('digitsLabel').textContent = state.digits;
    $('countLabel').textContent = state.count;

    $('setup').classList.add('hidden');
    $('quiz').classList.remove('hidden');

    generate();
  };

  $('backBtn').onclick = () => {
    $('quiz').classList.add('hidden');
    $('setup').classList.remove('hidden');
  };

  $('regenBtn').onclick = generate;

  $('checkBtn').onclick = () => {
    const val = Number($('answerInput').value);
    let ok;
    if (state.op === 'division') {
      const tol = 1e-6 * Math.max(1, Math.abs(state.answer));
      ok = Math.abs(val - state.answer) <= tol;
    } else {
      ok = val === state.answer;
    }
    $('status').textContent = ok ? 'Correct!' : 'Try again.';
    $('status').className = 'mt-3 text-sm ' + (ok ? 'text-emerald-600' : 'text-red-600');
    if (ok) nextQuiz();
  };

  $('showBtn').onclick = () => {
    $('answerInput').value = state.answer;
    $('status').textContent = 'Shown.';
    $('status').className = 'mt-3 text-sm text-emerald-600';
    nextQuiz();
  };

  // theme toggle
  $('themeBtn').onclick = () => {
    document.documentElement.classList.toggle('dark');
  };
</script>


</body>
</html>
